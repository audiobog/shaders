{
    "editions": [
        {
            "code": "/*{\n    \"CREDIT\": \"Beatline\",\n    \"DESCRIPTION\": \"Controls Pan, Tilt and Intensity of any number of identical movers via DMX pixel mapping. Pixel map your mover ficture to this material and map as follows: Red=Tilt, Green=Tilt, Blue=Brightness\",\n    \"TAGS\": \"movers, pan, tilt, intensity, dmx\",\n    \"VSN\": \"1.4\",\n    \"INPUTS\": [\n        { \"LABEL\": \"Mover Count\", \"NAME\": \"mat_mover_count\", \"TYPE\": \"int\", \"DEFAULT\": 6, \"MIN\": 1, \"MAX\": 32, \"DESCRIPTION\": \"Number of movers (1–32)\" },\n\t\t  { \"LABEL\": \"Cycle offset\", \"NAME\": \"cycle_offset\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 1.0, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Position in the wave cycle (0–1)\" },\n\t     { \"LABEL\": \"Pan and Tilt fine adjust\", \"NAME\": \"mat_pan_tilt\", \"TYPE\": \"point2D\", \"MIN\": [-1.0, -1.0], \"MAX\": [1.0, 1.0], \"DEFAULT\": [0.0, 0.0], \"DESCRIPTION\": \"Fine adjustment for Pan and Tilt. Can be used as follow spot.\" },\n        { \"LABEL\": \"X sensitivity\", \"NAME\": \"mat_x_sens\", \"TYPE\": \"float\", \"MIN\": -1.0, \"MAX\": 1.0, \"DEFAULT\": 0.1, \"DESCRIPTION\": \"Pan fine adjust\" },\n        { \"LABEL\": \"Y sensitivity\", \"NAME\": \"mat_y_sens\", \"TYPE\": \"float\", \"MIN\": -1.0, \"MAX\": 1.0, \"DEFAULT\": 0.2, \"DESCRIPTION\": \"Tilt fine adjust\" },\n\n\n        { \"LABEL\": \"Pan control/Center\", \"NAME\": \"mat_pan_center\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 1.0, \"DEFAULT\": 0.5, \"DESCRIPTION\": \"Pan\" },\n        { \"LABEL\": \"Pan control/Spread\", \"NAME\": \"mat_pan_spread\", \"TYPE\": \"float\", \"MIN\": -0.5, \"MAX\": 0.5, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Spread pan to go from parallel to fan.\" },\n        { \"LABEL\": \"Pan control/Amplitude\", \"NAME\": \"mat_pan_amp\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 0.5, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Pan wave amplitude\" },\n        { \"LABEL\": \"Pan control/Phase spacing\", \"NAME\": \"mat_pan_spacing\", \"TYPE\": \"float\", \"MIN\": -2.0, \"MAX\": 2.0, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Spacing of pan animation between movers.\" },\n        { \"LABEL\": \"Pan control/Animation speed\", \"NAME\": \"mat_pan_speed\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 4.0, \"DEFAULT\": 1.0, \"DESCRIPTION\": \"Speed multiplier to BPM\" },\n        { \"LABEL\": \"Pan control/BPM Sync\", \"NAME\": \"mat_pan_bpmsync\", \"TYPE\": \"bool\", \"DEFAULT\": true, \"FLAGS\": \"button\" },\n\n        { \"LABEL\": \"Tilt control/Center\", \"NAME\": \"mat_tilt_center\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 1.0, \"DEFAULT\": 0.5, \"DESCRIPTION\": \"Tilt\" },\n        { \"LABEL\": \"Tilt control/Spread\", \"NAME\": \"mat_tilt_spread\", \"TYPE\": \"float\", \"MIN\": -1.0, \"MAX\": 1.0, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Spread tilt to go from parallel to fan.\" },\n        { \"LABEL\": \"Tilt control/Amplitude\", \"NAME\": \"mat_tilt_amp\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 0.5, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Tilt wave amplitude\" },\n        { \"LABEL\": \"Tilt control/Phase spacing\", \"NAME\": \"mat_tilt_spacing\", \"TYPE\": \"float\", \"MIN\": -2.0, \"MAX\": 2.0, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Spacing of pan animation between movers.\" },\n        { \"LABEL\": \"Tilt control/Animation speed\", \"NAME\": \"mat_tilt_speed\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 4.0, \"DEFAULT\": 1.0, \"DESCRIPTION\": \"Speed multiplier to BPM\" },\n        { \"LABEL\": \"Tilt control/BPM Sync\", \"NAME\": \"mat_tilt_bpmsync\", \"TYPE\": \"bool\", \"DEFAULT\": true, \"FLAGS\": \"button\" },\n\n\t\t  { \"LABEL\": \"Intensity control/Base\", \"NAME\": \"mat_intensity_base\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 1.0, \"DEFAULT\": 0.5, \"DESCRIPTION\": \"Intensity\" },\n        { \"LABEL\": \"Intensity control/Amplitude\", \"NAME\": \"mat_intensity_amp\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 0.5, \"DEFAULT\": 0.2, \"DESCRIPTION\": \"Intensity wave amplitude\" },\n        { \"LABEL\": \"Intensity control/Phase spacing\", \"NAME\": \"mat_intensity_spacing\", \"TYPE\": \"float\", \"MIN\": -3.0, \"MAX\": 3.0, \"DEFAULT\": 0.0, \"DESCRIPTION\": \"Spacing of Intensity animation between movers.\" },\n        { \"LABEL\": \"Intensity control/Animation speed\", \"NAME\": \"mat_intensity_speed\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 4.0, \"DEFAULT\": 1.0, \"DESCRIPTION\": \"Speed multiplier to BPM\" },\n        { \"LABEL\": \"Intensity control/BPM Sync\", \"NAME\": \"mat_intensity_bpmsync\", \"TYPE\": \"bool\", \"DEFAULT\": true, \"FLAGS\": \"button\" },\n        { \"Label\": \"Intensity control/Strobe Frequency\", \"NAME\": \"mat_strobe_frequency\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 8.0, \"DEFAULT\": 1.0 },\n        { \"Label\": \"Intensity control/Strobe Duty\", \"NAME\": \"mat_strobe_duty\", \"TYPE\": \"float\", \"MIN\": 0.0, \"MAX\": 1.0, \"DEFAULT\": 0.0 },\n   ],\n    \"GENERATORS\": [\n        {\"NAME\": \"pan_animation_time\", \"TYPE\": \"time_base\", \"PARAMS\": {\"speed\": \"mat_pan_speed\", \"bpm_sync\": \"mat_pan_bpmsync\", \"speed_curve\": 2, \"link_speed_to_global_bpm\":true}},\n        {\"NAME\": \"tilt_animation_time\", \"TYPE\": \"time_base\", \"PARAMS\": {\"speed\": \"mat_tilt_speed\", \"bpm_sync\": \"mat_tilt_bpmsync\", \"speed_curve\": 2, \"link_speed_to_global_bpm\":true}},\n        {\"NAME\": \"intensity_animation_time\", \"TYPE\": \"time_base\", \"PARAMS\": {\"speed\": \"mat_intensity_speed\", \"bpm_sync\": \"mat_intensity_bpmsync\", \"speed_curve\": 2, \"link_speed_to_global_bpm\":true}},\n        {\"NAME\": \"strob_position\", \"TYPE\": \"time_base\", \"PARAMS\": {\"speed\": \"mat_speed\", \"strob\": 0, \"bpm_sync\": \"mat_intensity_bpmsync\", \"speed_curve\":2, \"link_speed_to_global_bpm\":true}},\n    ]\n}*/\n\n#include \"MadCommon.glsl\"\n\nin float adjusted_pos;\n\nconst float TWO_PI = 6.28318530718;\n\nfloat cospos(float position){\n   return cos(TWO_PI * position);\n}\n\nfloat safeSpacing(float v, float count) {\n    return (abs(v) < 0.0001) ? 1e9 : (count * v);\n}\n\nvec4 materialColorForPixel(vec2 texCoord)\n{\n    int count = clamp(mat_mover_count, 1, 32);\n    float moverIndex = floor(texCoord.x * float(count));\n    moverIndex = clamp(moverIndex, 0.0, float(count - 1));\n\t float panSpacing = safeSpacing(mat_pan_spacing, count);\n\t float tiltSpacing = safeSpacing(mat_tilt_spacing, count);\n\t float intensitySpacing = safeSpacing(mat_intensity_spacing, count);\n\n    float sym = (texCoord.x * 2.0 - 1.0); // -1 left → 0 center → +1 right\n\n    float panSpread = sym * mat_pan_spread;\n    float panAdjust = clamp(mat_pan_center + (mat_pan_tilt.x * mat_x_sens) + panSpread, 0.0, 1.0);\n    float panAmp = min(min(panAdjust, 1 - panAdjust), mat_pan_amp);\n\t float pan  =  panAdjust + cospos(cycle_offset + pan_animation_time  + (moverIndex /  panSpacing )) * panAmp;\n\n\t float tiltSpread = sym * mat_tilt_spread;\n    float tiltAdjust = clamp(mat_tilt_center + (mat_pan_tilt.y * mat_y_sens) + tiltSpread, 0.0, 1.0);\n    float tiltAmp = min(min(tiltAdjust, 1 - tiltAdjust), mat_tilt_amp);\n    float tilt = tiltAdjust + cospos(cycle_offset + tilt_animation_time + (moverIndex / tiltSpacing )) * tiltAmp;\n\n    float intensityAmp = min(min(mat_intensity_base, 1 - mat_intensity_base), mat_intensity_amp);\n    float intensity = mat_intensity_base + cospos(cycle_offset + intensity_animation_time + (moverIndex / intensitySpacing )) * intensityAmp;\n  \n    float phase = fract(TIME * mat_strobe_frequency);\n    float v = phase < mat_strobe_duty ? 1.0 : 0.0;\n\n\t return vec4(pan, tilt, intensity * v, 1.0);\n}\n\n\n\n\n\n\n",
            "isPrompt": false,
            "madness": 0.5,
            "mode": "",
            "title": "New"
        }
    ],
    "index": 0
}
